{"version":3,"sources":["../src/providers/spa-provider.tsx"],"sourcesContent":["'use client';\n\nimport { useAuth0 } from '@auth0/auth0-react';\nimport type { BasicAuth0ContextInterface } from '@auth0/web-ui-components-core';\nimport * as React from 'react';\n\nimport { CoreClientContext } from '../hooks/use-core-client';\nimport { useCoreClientInitialization } from '../hooks/use-core-client-initialization';\nimport type { InternalProviderProps } from '../types/auth-types';\n\nimport { ScopeManagerProvider } from './scope-manager-provider';\n\nexport const SpaProvider = ({\n  i18n,\n  authDetails,\n  children,\n}: InternalProviderProps & { children: React.ReactNode }) => {\n  let auth0ContextInterface: BasicAuth0ContextInterface = useAuth0();\n  // Check if user is using auth0-react SDK\n  if (!auth0ContextInterface) {\n    // Check if user is passing the auth0-spa-js SDK\n    if (authDetails?.contextInterface) {\n      auth0ContextInterface = authDetails.contextInterface;\n    } else {\n      throw new Error(\n        'Auth0ContextInterface is not available. Make sure you use auth0-react-sdk or auth0-spa-js and you are passing the client to the SDK',\n      );\n    }\n  }\n\n  const memoizedAuthDetails = React.useMemo(\n    () => ({\n      ...authDetails,\n      contextInterface: auth0ContextInterface,\n    }),\n    [authDetails],\n  );\n\n  const coreClient = useCoreClientInitialization({\n    authDetails: memoizedAuthDetails,\n    i18nOptions: i18n,\n  });\n\n  const coreClientValue = React.useMemo(\n    () => ({\n      coreClient,\n    }),\n    [coreClient],\n  );\n\n  return (\n    <CoreClientContext.Provider value={coreClientValue}>\n      <ScopeManagerProvider>{children}</ScopeManagerProvider>\n    </CoreClientContext.Provider>\n  );\n};\n\nexport default SpaProvider;\n"],"mappings":"oEAEA,OAAS,YAAAA,MAAgB,qBAEzB,UAAYC,MAAW,QAgDjB,cAAAC,MAAA,oBAxCC,IAAMC,EAAc,CAAC,CAC1B,KAAAC,EACA,YAAAC,EACA,SAAAC,CACF,IAA6D,CAC3D,IAAIC,EAAoDC,EAAS,EAEjE,GAAI,CAACD,EAEH,GAAIF,GAAa,iBACfE,EAAwBF,EAAY,qBAEpC,OAAM,IAAI,MACR,qIACF,EAIJ,IAAMI,EAA4B,UAChC,KAAO,CACL,GAAGJ,EACH,iBAAkBE,CACpB,GACA,CAACF,CAAW,CACd,EAEMK,EAAaC,EAA4B,CAC7C,YAAaF,EACb,YAAaL,CACf,CAAC,EAEKQ,EAAwB,UAC5B,KAAO,CACL,WAAAF,CACF,GACA,CAACA,CAAU,CACb,EAEA,OACER,EAACW,EAAkB,SAAlB,CAA2B,MAAOD,EACjC,SAAAV,EAACY,EAAA,CAAsB,SAAAR,EAAS,EAClC,CAEJ,EAEOS,EAAQZ","names":["useAuth0","React","jsx","SpaProvider","i18n","authDetails","children","auth0ContextInterface","useAuth0","memoizedAuthDetails","coreClient","useCoreClientInitialization","coreClientValue","CoreClientContext","ScopeManagerProvider","spa_provider_default"]}