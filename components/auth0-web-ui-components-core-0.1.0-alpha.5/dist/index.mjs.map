{"version":3,"sources":["../src/i18n/i18n-service.ts","../src/api/api-error.ts","../src/api/business-error.ts","../src/services/my-account/my-account-api-service.ts","../src/services/my-org/my-org-api-service.ts","../src/auth/auth-utils.ts","../src/auth/token-manager.ts","../src/auth/core-client.ts","../src/schemas/my-account/mfa/email-schema.ts","../src/schemas/my-account/mfa/sms-schema.ts","../src/schemas/common/index.ts","../src/schemas/my-org/org-management/organization-details-schema.ts","../src/services/my-account/mfa/mfa-constants.ts","../src/services/my-account/mfa/mfa-utils.ts","../src/services/my-account/mfa/mfa-mappers.ts","../src/services/my-account/my-account-api-constants.ts","../src/services/my-org/org-management/org-details-constants.ts","../src/services/my-org/org-management/org-details-factory.ts","../src/services/my-org/org-management/org-details-mappers.ts","../src/services/my-org/idp-management/sso-provider/sso-provider-constants.ts","../src/services/my-org/idp-management/sso-provider/sso-provider-mappers.ts","../src/services/my-org/my-org-api-constants.ts","../src/schemas/my-org/idp-management/sso-provider/sso-provider-create-schema.ts","../src/schemas/my-org/idp-management/sso-provider/sso-provider-delete-schema.ts","../src/schemas/my-org/idp-management/sso-provisioning/sso-provisioning-edit-schema.ts","../src/schemas/my-org/domain-management/domain-create-schema.ts","../src/theme/theme-utils.ts","../src/assets/icons/index.ts"],"sourcesContent":["import type {\n  LangTranslations,\n  TranslationFunction,\n  I18nInitOptions,\n  TFactory,\n  I18nServiceInterface,\n  TransComponent,\n  TranslationElements,\n} from './i18n-types';\n\n/**\n * Pure utility functions for internationalization (i18n) functionality.\n * These functions handle translation loading, variable substitution, and namespace-based translation.\n */\nexport const I18nUtils = {\n  /**\n   * Regular expression for matching variable placeholders in translation strings.\n   * Matches patterns like ${variableName} for dynamic content substitution.\n   */\n  VAR_REGEX: /\\${(\\w+)}/g,\n\n  /**\n   * Regular expression for matching component placeholders in translation strings.\n   * Matches patterns like <0>text</0> or <link>text</link> for safe HTML rendering.\n   */\n  COMPONENT_REGEX: /<(\\w+)>(.*?)<\\/\\1>/g,\n\n  /**\n   * Retrieves a nested value from an object using dot notation path traversal.\n   *\n   * @param obj - The object to traverse\n   * @param path - Dot-separated path to the desired value (e.g., 'common.errors.required')\n   * @returns The value at the specified path, or undefined if not found\n   *\n   * @example\n   * ```typescript\n   * const obj = { common: { errors: { required: 'Field is required' } } };\n   * getNestedValue(obj, 'common.errors.required') // Returns: 'Field is required'\n   * ```\n   */\n  getNestedValue(obj: Record<string, unknown>, path: string): unknown {\n    let current: unknown = obj;\n    const keys = path.split('.');\n\n    for (const key of keys) {\n      if (current === null || typeof current !== 'object' || Array.isArray(current)) {\n        return undefined;\n      }\n      current = (current as Record<string, unknown>)[key];\n    }\n\n    return current;\n  },\n\n  /**\n   * Performs variable substitution in a template string using provided variables.\n   *\n   * @param template - The template string containing ${variable} placeholders\n   * @param vars - Object containing variable values for substitution\n   * @returns The template string with variables substituted\n   *\n   * @example\n   * ```typescript\n   * substitute('Hello ${name}!', { name: 'World' }) // Returns: 'Hello World!'\n   * substitute('No variables here', { name: 'World' }) // Returns: 'No variables here'\n   * ```\n   */\n  substitute(template: string, vars?: Record<string, unknown>): string {\n    if (!vars) return template;\n\n    if (!template.includes('${')) return template;\n\n    I18nUtils.VAR_REGEX.lastIndex = 0;\n    return template.replace(I18nUtils.VAR_REGEX, (_, key) => String(vars[key] ?? ''));\n  },\n\n  /**\n   * Parses a translation string with component placeholders and returns structured data\n   * for safe rendering without dangerouslySetInnerHTML.\n   *\n   * @param template - The translation string with component placeholders like <0>text</0>\n   * @param components - Object mapping component keys to React elements or render functions\n   * @returns Array of strings and React elements for safe rendering\n   *\n   * @example\n   * ```typescript\n   * const result = parseComponents(\n   *   'Click <link>here</link> to learn more',\n   *   { link: (children) => <a href=\"/help\">{children}</a> }\n   * );\n   * // Returns: ['Click ', <a href=\"/help\">here</a>, ' to learn more']\n   * ```\n   */\n  parseComponents(template: string, components?: TranslationElements): (string | TransComponent)[] {\n    if (!components || !template.includes('<')) {\n      return [template];\n    }\n\n    const result: (string | TransComponent)[] = [];\n    let lastIndex = 0;\n\n    I18nUtils.COMPONENT_REGEX.lastIndex = 0;\n    let match;\n\n    while ((match = I18nUtils.COMPONENT_REGEX.exec(template)) !== null) {\n      const [fullMatch, componentKey, content] = match;\n      const matchStart = match.index!;\n\n      // Add text before the component\n      if (matchStart > lastIndex) {\n        result.push(template.slice(lastIndex, matchStart));\n      }\n\n      // Add the component\n      const component = components[componentKey];\n      if (component) {\n        if (typeof component === 'function') {\n          result.push(component(content));\n        } else {\n          result.push(component);\n        }\n      } else {\n        // Fallback: render as plain text if component not found\n        result.push(content);\n      }\n\n      lastIndex = matchStart + fullMatch.length;\n    }\n\n    // Add remaining text\n    if (lastIndex < template.length) {\n      result.push(template.slice(lastIndex));\n    }\n\n    return result.length === 1 && typeof result[0] === 'string' ? [result[0]] : result;\n  },\n\n  /**\n   * Creates an enhanced translation function that supports both simple translations\n   * and component-based translations for safe HTML rendering.\n   *\n   * @param namespace - The namespace prefix for translations\n   * @param translations - The loaded translation data\n   * @param overrides - Optional override translations that take precedence\n   * @returns An enhanced translation function with Trans component support\n   */\n  createEnhancedTranslator(\n    namespace: string,\n    translations: LangTranslations | null,\n    overrides?: Record<string, unknown>,\n  ): TranslationFunction & {\n    trans: (\n      key: string,\n      options?: {\n        components?: TranslationElements;\n        vars?: Record<string, unknown>;\n        fallback?: string;\n      },\n    ) => (string | TransComponent)[];\n  } {\n    const baseTranslator = I18nUtils.createTranslator(namespace, translations, overrides);\n\n    const enhancedTranslator = baseTranslator as TranslationFunction & {\n      trans: (\n        key: string,\n        options?: {\n          components?: TranslationElements;\n          vars?: Record<string, unknown>;\n          fallback?: string;\n        },\n      ) => (string | TransComponent)[];\n    };\n\n    // Add Trans component method for safe HTML rendering\n    enhancedTranslator.trans = (\n      key: string,\n      options: {\n        components?: TranslationElements;\n        vars?: Record<string, unknown>;\n        fallback?: string;\n      } = {},\n    ) => {\n      const { components, vars, fallback } = options;\n      let text = baseTranslator(key, vars, fallback);\n\n      return I18nUtils.parseComponents(text, components);\n    };\n\n    return enhancedTranslator;\n  },\n\n  /**\n   * Creates a translation function for a specific namespace with optional overrides.\n   *\n   * @param namespace - The namespace prefix for translations (e.g., 'mfa', 'common')\n   * @param translations - The loaded translation data\n   * @param overrides - Optional override translations that take precedence\n   * @returns A translation function scoped to the specified namespace\n   */\n  createTranslator(\n    namespace: string,\n    translations: LangTranslations | null,\n    overrides?: Record<string, unknown>,\n  ): TranslationFunction {\n    const prefix = `${namespace}.`;\n    const hasOverrides = overrides && Object.keys(overrides).length > 0;\n\n    return (key: string, vars?: Record<string, unknown>, fallback?: string): string => {\n      const fullKey = prefix + key;\n\n      if (hasOverrides) {\n        const overrideValue = I18nUtils.getNestedValue(overrides!, key);\n        if (overrideValue !== undefined) {\n          return I18nUtils.substitute(String(overrideValue), vars);\n        }\n      }\n\n      if (!translations) {\n        return fallback || `${prefix}${key}`;\n      }\n\n      const translationValue = translations\n        ? I18nUtils.getNestedValue(translations, fullKey)\n        : undefined;\n\n      if (translationValue !== undefined) {\n        return I18nUtils.substitute(String(translationValue), vars);\n      }\n\n      // Return fallback if provided, otherwise return the full key or just the key\n      return fallback || (translations ? key : `${prefix}${key}`);\n    };\n  },\n\n  /**\n   * Loads translation data for a specific language from the translations directory.\n   *\n   * @param language - The language code to load (e.g., 'en-US', 'es-ES')\n   * @param cache - Optional cache map to store loaded translations\n   * @returns Promise resolving to translation data or null if not found\n   */\n  async loadTranslations(\n    language: string,\n    cache?: Map<string, LangTranslations | null>,\n  ): Promise<LangTranslations | null> {\n    if (cache?.has(language)) {\n      return cache.get(language)!;\n    }\n\n    try {\n      const mod = await import(`./translations/${language}.json`);\n      const data = mod.default ?? mod;\n      if (cache) {\n        cache.set(language, data);\n      }\n      return data;\n    } catch {\n      if (cache) {\n        cache.set(language, null);\n      }\n      return null;\n    }\n  },\n\n  /**\n   * Loads translations with automatic fallback support for missing languages.\n   *\n   * @param currentLanguage - The primary language to load\n   * @param fallbackLanguage - Optional fallback language if primary fails\n   * @param cache - Optional cache map to store loaded translations\n   * @returns Promise resolving to translation data with fallback support\n   */\n  async loadTranslationsWithFallback(\n    currentLanguage: string,\n    fallbackLanguage?: string,\n    cache?: Map<string, LangTranslations | null>,\n  ): Promise<LangTranslations | null> {\n    // Try to load current language first\n    let result = await I18nUtils.loadTranslations(currentLanguage, cache);\n    if (result) return result;\n\n    // Fallback to fallback language if available\n    if (fallbackLanguage && fallbackLanguage !== currentLanguage) {\n      result = await I18nUtils.loadTranslations(fallbackLanguage, cache);\n      if (result) return result;\n    }\n\n    // Final fallback to en-US if not already tried\n    if (currentLanguage !== 'en-US' && fallbackLanguage !== 'en-US') {\n      return I18nUtils.loadTranslations('en-US', cache);\n    }\n\n    return null;\n  },\n};\n\n/**\n * Creates an internationalization (i18n) service with translation loading and management capabilities.\n *\n * This factory function initializes the i18n service with language support, translation loading,\n * and runtime language switching. It supports namespace-based translations, variable substitution,\n * and safe HTML rendering through Trans component pattern.\n *\n * @param options - Optional configuration for i18n initialization\n * @param options.currentLanguage - The current language code (defaults to 'en-US')\n * @param options.fallbackLanguage - The fallback language code (defaults to 'en-US')\n * @returns Promise resolving to a fully configured i18n service interface\n *\n * @example\n * ```typescript\n * // Basic initialization\n * const i18nService = await createI18nService();\n *\n * // With custom language\n * const i18nService = await createI18nService({\n *   currentLanguage: 'es-ES',\n *   fallbackLanguage: 'en-US'\n * });\n *\n * // Use translations with safe HTML rendering\n * const t = i18nService.translator('mfa');\n * const message = t('enrollment.success'); // Plain text\n * const elements = t.trans('help.link', {\n *   components: {\n *     link: (children) => <a href=\"/help\">{children}</a>\n *   }\n * }); // Safe HTML components\n * ```\n */\nexport async function createI18nService(\n  options: I18nInitOptions = {},\n): Promise<I18nServiceInterface> {\n  const currentLanguage = options.currentLanguage ?? 'en-US';\n  const fallbackLanguage = options.fallbackLanguage ?? 'en-US';\n  const cache = new Map<string, LangTranslations | null>();\n\n  // Load initial translations\n  const translations = await I18nUtils.loadTranslationsWithFallback(\n    currentLanguage,\n    fallbackLanguage,\n    cache,\n  );\n\n  // State management through closure\n  let _currentLanguage = currentLanguage;\n  let _fallbackLanguage = fallbackLanguage;\n  let _translations = translations;\n\n  const service: I18nServiceInterface = {\n    get currentLanguage(): string {\n      return _currentLanguage;\n    },\n\n    get fallbackLanguage(): string | undefined {\n      return _fallbackLanguage;\n    },\n\n    get translator(): TFactory {\n      return (namespace: string, overrides?: Record<string, unknown>) =>\n        I18nUtils.createEnhancedTranslator(namespace, _translations, overrides);\n    },\n\n    get commonTranslator(): TranslationFunction & {\n      trans: (\n        key: string,\n        options?: {\n          components?: TranslationElements;\n          vars?: Record<string, unknown>;\n          fallback?: string;\n        },\n      ) => (string | TransComponent)[];\n    } {\n      return I18nUtils.createEnhancedTranslator('common', _translations);\n    },\n\n    getCurrentTranslations(): LangTranslations | null {\n      return _translations;\n    },\n\n    async changeLanguage(language: string, newFallbackLanguage?: string): Promise<void> {\n      try {\n        _currentLanguage = language;\n        _fallbackLanguage = newFallbackLanguage ?? _fallbackLanguage;\n\n        _translations = await I18nUtils.loadTranslationsWithFallback(\n          _currentLanguage,\n          _fallbackLanguage,\n          cache,\n        );\n      } catch (error) {\n        throw new Error(\n          `Failed to change language to '${language}': ${error instanceof Error ? error.message : 'Unknown error'}`,\n        );\n      }\n    },\n  };\n\n  return service;\n}\n","import type { ApiError } from './api-types';\n\n/**\n * Type guard to determine if a given value is an ApiError.\n *\n * @param error - The unknown value to test.\n * @returns `true` if the value conforms to the ApiError shape; otherwise, `false`.\n */\nexport function isApiError(error: unknown): error is ApiError {\n  return (\n    typeof error === 'object' &&\n    error !== null &&\n    (error as ApiError).name === 'ApiError' &&\n    typeof (error as ApiError).message === 'string' &&\n    typeof (error as ApiError).status === 'number'\n  );\n}\n\n/**\n * Type guard to check if an error has a structured API error body\n */\nexport function hasApiErrorBody(\n  error: unknown,\n): error is { body?: { detail?: string; title?: string; status?: number } } {\n  return (\n    typeof error === 'object' &&\n    error !== null &&\n    'body' in error &&\n    typeof error.body === 'object' &&\n    error.body !== null\n  );\n}\n\n/**\n * Normalizes an unknown error into a standard JavaScript Error instance.\n *\n * This function tries to extract meaningful information from API errors,\n * strings, or other unknown error shapes. You can provide a custom resolver\n * function to map API error codes to user-friendly messages.\n *\n * @param error - The unknown error object or value to normalize.\n * @param options - Optional settings including:\n *   - resolver: A function that maps error codes to user-friendly messages.\n *   - fallbackMessage: A default message used when the error cannot be mapped.\n * @returns A standard Error object with an appropriate message.\n */\nexport function normalizeError(\n  error: unknown,\n  options?: {\n    resolver?: (code: string) => string | undefined | null;\n    fallbackMessage?: string;\n  },\n): Error {\n  if (typeof error === 'string') return new Error(error);\n  if (error instanceof Error) return error;\n\n  if (isApiError(error)) {\n    const code = error.data?.error;\n    if (typeof code === 'string' && options?.resolver) {\n      const resolved = options.resolver(code);\n      if (resolved) return new Error(resolved);\n    }\n    return new Error(error.message ?? options?.fallbackMessage ?? 'Unknown API error');\n  }\n\n  return new Error(options?.fallbackMessage ?? 'An unknown error occurred');\n}\n\nexport function getStatusCode(error: unknown): number | undefined {\n  return typeof error === 'object' && error !== null\n    ? [\n        (error as { status?: unknown }).status,\n        (error as { statusCode?: unknown }).statusCode,\n        (error as { response?: { status?: unknown } }).response?.status,\n        (error as { body?: { status?: unknown } }).body?.status,\n      ].find((s) => typeof s === 'number')\n    : undefined;\n}\n","export interface BusinessErrorData {\n  message: string;\n}\n\nexport class BusinessError extends Error {\n  public readonly type = 'BusinessError';\n\n  constructor(data: BusinessErrorData) {\n    super(data.message);\n    this.name = 'BusinessError';\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, BusinessError);\n    }\n  }\n}\n\nexport function isBusinessError(error: unknown): error is BusinessError {\n  return (\n    error instanceof BusinessError ||\n    (typeof error === 'object' &&\n      error !== null &&\n      'type' in error &&\n      (error as { type: unknown }).type === 'BusinessError')\n  );\n}\n","import { MyAccountClient } from '@auth0/myaccount';\n\nimport type { AuthDetails } from '../../auth/auth-types';\nimport type { createTokenManager } from '../../auth/token-manager';\n\nexport function initializeMyAccountClient(\n  auth: AuthDetails,\n  tokenManagerService: ReturnType<typeof createTokenManager>,\n): {\n  client: MyAccountClient;\n  setLatestScopes: (scopes: string) => void;\n} {\n  let latestScopes = '';\n\n  const setLatestScopes = (scopes: string) => {\n    latestScopes = scopes;\n  };\n\n  if (auth.authProxyUrl) {\n    const myAccountProxyPath = 'me';\n    const myAccountBaseUrl = `${auth.authProxyUrl.replace(/\\/$/, '')}/${myAccountProxyPath}`;\n    const fetcher = async (url: string, init?: RequestInit) => {\n      return fetch(url, {\n        ...init,\n        headers: {\n          ...init?.headers,\n          ...(init?.body && { 'Content-Type': 'application/json' }),\n          ...(latestScopes && { 'auth0-scope': latestScopes }),\n        },\n      });\n    };\n    return {\n      client: new MyAccountClient({\n        domain: '',\n        baseUrl: myAccountBaseUrl.trim(),\n        telemetry: false,\n        fetcher,\n      }),\n      setLatestScopes,\n    };\n  } else if (auth.domain) {\n    const fetcher = async (url: string, init?: RequestInit) => {\n      const token = await tokenManagerService.getToken(latestScopes, 'me');\n      return fetch(url, {\n        ...init,\n        headers: {\n          ...init?.headers,\n          ...(init?.body && { 'Content-Type': 'application/json' }),\n          ...(token && { Authorization: `Bearer ${token}` }),\n        },\n      });\n    };\n    return {\n      client: new MyAccountClient({\n        domain: auth.domain.trim(),\n        fetcher,\n      }),\n      setLatestScopes,\n    };\n  }\n  throw new Error('Missing domain or proxy URL for MyAccountClient');\n}\n","import type { AuthDetails } from '@core/auth/auth-types';\nimport type { createTokenManager } from '@core/auth/token-manager';\nimport { MyOrgClient } from 'auth0-myorg-sdk';\n\nexport function initializeMyOrgClient(\n  auth: AuthDetails,\n  tokenManagerService: ReturnType<typeof createTokenManager>,\n): {\n  client: MyOrgClient;\n  setLatestScopes: (scopes: string) => void;\n} {\n  let latestScopes = '';\n\n  const setLatestScopes = (scopes: string) => {\n    latestScopes = scopes;\n  };\n\n  if (auth.authProxyUrl) {\n    const myOrgProxyPath = 'my-org';\n    const myOrgProxyBaseUrl = `${auth.authProxyUrl.replace(/\\/$/, '')}/${myOrgProxyPath}`;\n    const fetcher = async (url: string, init?: RequestInit) => {\n      return fetch(url, {\n        ...init,\n        headers: {\n          ...init?.headers,\n          ...(init?.body && { 'Content-Type': 'application/json' }),\n          ...(latestScopes && { 'auth0-scope': latestScopes }),\n        },\n      });\n    };\n    return {\n      client: new MyOrgClient({\n        domain: '',\n        baseUrl: myOrgProxyBaseUrl.trim(),\n        telemetry: false,\n        fetcher,\n      }),\n      setLatestScopes,\n    };\n  } else if (auth.domain) {\n    const fetcher = async (url: string, init?: RequestInit) => {\n      const token = await tokenManagerService.getToken(latestScopes, 'my-org');\n      return fetch(url, {\n        ...init,\n        headers: {\n          ...init?.headers,\n          ...(init?.body && { 'Content-Type': 'application/json' }),\n          ...(token && { Authorization: `Bearer ${token}` }),\n        },\n      });\n    };\n    return {\n      client: new MyOrgClient({\n        domain: auth.domain.trim(),\n        fetcher,\n      }),\n      setLatestScopes,\n    };\n  }\n  throw new Error('Missing domain or proxy URL for MyOrgClient');\n}\n","export const AuthUtils = {\n  /**\n   * Converts a domain string to a properly formatted URL with HTTPS protocol and trailing slash.\n   *\n   * This utility function ensures that domain strings are consistently formatted as valid URLs.\n   * It handles domains that may or may not include protocol or trailing slashes.\n   *\n   * @param domain - The domain string to convert (e.g., 'example.auth0.com' or 'https://example.auth0.com/')\n   * @returns A properly formatted URL with HTTPS protocol and trailing slash\n   *\n   * @example\n   * ```typescript\n   * toURL('example.auth0.com') // Returns: 'https://example.auth0.com/'\n   * toURL('https://example.auth0.com') // Returns: 'https://example.auth0.com/'\n   * toURL('http://localhost:3000') // Returns: 'http://localhost:3000/'\n   * ```\n   */\n  toURL(domain: string): string {\n    const domainWithSlash = domain.endsWith('/') ? domain : `${domain}/`;\n    if (domainWithSlash.startsWith('http://') || domainWithSlash.startsWith('https://')) {\n      return domainWithSlash;\n    }\n    return `https://${domainWithSlash}`;\n  },\n};\n","import type { AuthDetails, BasicAuth0ContextInterface } from './auth-types';\nimport { AuthUtils } from './auth-utils';\n\n/**\n * Store for pending token requests to prevent duplicate requests for the same token.\n * Maps request keys (scope + audience combination) to pending promises.\n */\nconst pendingTokenRequests = new Map<string, Promise<string>>();\n\nconst FALLBACK_ERRORS = new Set(['consent_required', 'login_required', 'mfa_required']);\n\n/**\n * Pure utility functions for token management operations.\n * These functions handle token requests, validation, and caching logic.\n */\nconst TokenUtils = {\n  /**\n   * Builds a complete audience URL by combining the Auth0 domain with the audience path.\n   *\n   * @param domain - The Auth0 domain\n   * @param audiencePath - The API audience path (e.g., 'mfa', 'users')\n   * @returns The complete audience URL with trailing slash or empty string if domain is not defined\n   */\n  buildAudience(domain: string, audiencePath: string): string {\n    const domainURL = AuthUtils.toURL(domain);\n    return domainURL ? `${domainURL}${audiencePath}/` : '';\n  },\n\n  /**\n   * Creates a unique key for token requests to enable deduplication and caching.\n   *\n   * @param scope - The OAuth scope for the token request\n   * @param audience - The target audience URL\n   * @returns A unique string key combining scope and audience\n   */\n  createRequestKey(scope: string, audience: string): string {\n    return `${scope}:${audience}`;\n  },\n\n  /**\n   * Validates that the core client is properly initialized with auth data.\n   *\n   * @param auth - The authentication details to validate\n   * @throws {Error} When the core client is not initialized\n   */\n  isCoreClientAuthInitialized(auth: AuthDetails): void {\n    if (!auth) {\n      throw new Error('TokenUtils: auth in CoreClient is not initialized.');\n    }\n  },\n\n  /**\n   * Validates that the core client is properly initialized with auth data and required authentication context.\n   *\n   * @param auth - The authentication details to validate\n   * @throws {Error} When the core client is not initialized or missing context interface\n   */\n  isCoreClientContextInterfaceInitialized(auth: AuthDetails): void {\n    if (!auth || !auth.contextInterface) {\n      throw new Error('TokenUtils: contextInterface in CoreClient is not initialized.');\n    }\n  },\n\n  /**\n   * Validates the parameters required for a token request.\n   *\n   * @param auth - The authentication details containing domain configuration\n   * @param scope - The OAuth scope being requested\n   * @throws {Error} When domain is not configured or scope is missing\n   */\n  validateTokenRequest(auth: AuthDetails, scope: string): void {\n    if (!auth.domain) {\n      throw new Error('TokenUtils: Auth0 domain is not configured');\n    }\n    if (!scope) {\n      throw new Error('TokenUtils: Scope is required');\n    }\n  },\n\n  /**\n   * Determines if the client is running in proxy mode.\n   * In proxy mode, access tokens are not sent to avoid security issues.\n   *\n   * @param auth - The authentication details to check\n   * @returns True if running in proxy mode, false otherwise\n   */\n  isProxyMode(auth: AuthDetails): boolean {\n    return !!auth.authProxyUrl;\n  },\n\n  /**\n   * Fetches an access token silently.\n   *\n   * @param contextInterface - The Auth0 context interface for token operations\n   * @param scope - The OAuth scope for the token request\n   * @param audience - The target audience URL\n   * @param ignoreCache - Whether to bypass token cache and request fresh token\n   * @returns Promise resolving to the access token\n   * @throws {Error} When silent retrieval fail\n   */\n  async fetchToken(\n    contextInterface: BasicAuth0ContextInterface,\n    scope: string,\n    audience: string,\n    ignoreCache: boolean,\n  ): Promise<string> {\n    try {\n      const tokenResponse = await contextInterface.getAccessTokenSilently({\n        authorizationParams: {\n          audience,\n          scope,\n        },\n        detailedResponse: true,\n        ...(ignoreCache ? { cacheMode: 'off' } : {}),\n      });\n\n      const token = tokenResponse.access_token;\n      return token;\n    } catch (error) {\n      if (\n        typeof error === 'object' &&\n        error !== null &&\n        'error' in error &&\n        FALLBACK_ERRORS.has((error as { error: string }).error)\n      ) {\n        const errorType = (error as { error: string }).error;\n        const prompt = errorType === 'login_required' ? 'login' : 'consent';\n\n        const token = await contextInterface.getAccessTokenWithPopup({\n          authorizationParams: {\n            audience,\n            scope,\n            prompt,\n          },\n        });\n\n        if (!token) {\n          throw new Error('getAccessTokenWithPopup: Access token is not defined');\n        }\n        return token;\n      }\n      throw new Error('getAccessToken: failed', { cause: error });\n    }\n  },\n};\n\n/**\n * Creates a token manager service that handles access token retrieval with caching and deduplication.\n *\n * The token manager provides intelligent caching to prevent duplicate requests for the same token\n * and supportssilent authentication flows.\n *\n * @param auth - The authentication details containing domain, client configuration, and context interface\n * @returns A token manager service interface\n *\n * @example\n * ```typescript\n * const tokenManager = createTokenManager(authDetails);\n *\n * // Get token for MFA operations\n * const token = await tokenManager.getToken('read:me:authentication_methods', 'mfa');\n *\n * // Force fresh token (ignore cache)\n * const freshToken = await tokenManager.getToken('read:users', 'management', true);\n * ```\n */\nexport function createTokenManager(auth: AuthDetails) {\n  return {\n    /**\n     * Retrieves an access token for the specified scope and audience with intelligent caching and deduplication.\n     *\n     * In proxy mode, this method returns undefined as tokens should not be sent to proxy endpoints.\n     * For non-proxy mode, it attempts silent token retrieval.\n     *\n     * @param scope - The OAuth scope required for the token (e.g., 'read:me:authentication_methods')\n     * @param audiencePath - The API audience path (e.g., 'mfa', 'users')\n     * @param ignoreCache - Whether to bypass cache and request a fresh token\n     * @returns Promise resolving to access token string, or undefined in proxy mode\n     * @throws {Error} When core client is not initialized, parameters are invalid, or token retrieval fails\n     */\n    async getToken(\n      scope: string,\n      audiencePath: string,\n      ignoreCache: boolean = false,\n    ): Promise<string | undefined> {\n      // Ensure core client auth is initialized\n      TokenUtils.isCoreClientAuthInitialized(auth);\n\n      if (TokenUtils.isProxyMode(auth)) {\n        return Promise.resolve(undefined);\n      }\n\n      // Ensure core client \"contextInterface\" is initialized before getting a token\n      TokenUtils.isCoreClientContextInterfaceInitialized(auth);\n\n      // Validate request\n      TokenUtils.validateTokenRequest(auth, scope);\n\n      // Build audience and request key\n      const audience = TokenUtils.buildAudience(auth.domain!, audiencePath);\n      const requestKey = TokenUtils.createRequestKey(scope, audience);\n\n      // If ignoreCache is true, clear any pending request for this key\n      if (ignoreCache) {\n        pendingTokenRequests.delete(requestKey);\n      }\n\n      // Check if there's already a pending request for this token\n      const existingRequest = pendingTokenRequests.get(requestKey);\n      if (existingRequest) {\n        return existingRequest;\n      }\n\n      // Create new token request\n      const tokenPromise = TokenUtils.fetchToken(\n        auth.contextInterface!,\n        scope,\n        audience,\n        ignoreCache,\n      );\n\n      pendingTokenRequests.set(requestKey, tokenPromise);\n\n      try {\n        const token = await tokenPromise;\n        return token;\n      } finally {\n        // Clean up the pending request after completion\n        pendingTokenRequests.delete(requestKey);\n      }\n    },\n  };\n}\n","import { initializeMyAccountClient } from '@core/services/my-account/my-account-api-service';\nimport { initializeMyOrgClient } from '@core/services/my-org/my-org-api-service';\n\nimport type { I18nInitOptions } from '../i18n';\nimport { createI18nService } from '../i18n';\n\nimport type { AuthDetails, BaseCoreClientInterface, CoreClientInterface } from './auth-types';\nimport { createTokenManager } from './token-manager';\n\nfunction isProxyMode(auth: AuthDetails): boolean {\n  return !!auth.authProxyUrl;\n}\n\nfunction initializeAuthDetails(authDetails: AuthDetails): AuthDetails {\n  return authDetails;\n}\n\nexport async function createCoreClient(\n  authDetails: AuthDetails,\n  i18nOptions?: I18nInitOptions,\n): Promise<CoreClientInterface> {\n  const i18nService = await createI18nService(\n    i18nOptions || { currentLanguage: 'en-US', fallbackLanguage: 'en-US' },\n  );\n  const auth = initializeAuthDetails(authDetails);\n\n  const tokenManagerService = createTokenManager(auth);\n\n  const { client: myOrgApiClient, setLatestScopes: setOrgScopes } = initializeMyOrgClient(\n    auth,\n    tokenManagerService,\n  );\n  const { client: myAccountApiClient, setLatestScopes: setAccountScopes } =\n    initializeMyAccountClient(auth, tokenManagerService);\n\n  const baseCoreClient: BaseCoreClientInterface = {\n    auth,\n    i18nService,\n\n    async getToken(scope: string, audiencePath: string, ignoreCache = false) {\n      return tokenManagerService.getToken(scope, audiencePath, ignoreCache);\n    },\n\n    isProxyMode() {\n      return isProxyMode(auth);\n    },\n\n    ensureScopes: async (requiredScopes: string, audiencePath: string) => {\n      if (isProxyMode(auth) && auth.authProxyUrl) {\n        if (audiencePath === 'my-org') {\n          setOrgScopes(requiredScopes);\n        }\n        if (audiencePath === 'me') {\n          setAccountScopes(requiredScopes);\n        }\n      } else {\n        if (!auth.domain) {\n          throw new Error('Authentication domain is missing, cannot initialize SPA service.');\n        }\n        if (audiencePath === 'my-org') {\n          setOrgScopes(requiredScopes);\n        }\n        if (audiencePath === 'me') {\n          setAccountScopes(requiredScopes);\n        }\n\n        const token = await tokenManagerService.getToken(requiredScopes, audiencePath, true);\n        if (!token) {\n          throw new Error(`Failed to retrieve token for audience: ${audiencePath}`);\n        }\n      }\n    },\n  };\n\n  return {\n    ...baseCoreClient,\n    myAccountApiClient,\n    myOrgApiClient,\n    getMyAccountApiClient() {\n      if (!myAccountApiClient) {\n        throw new Error(\n          'myAccountApiClient is not enabled. Please use it within Auth0ComponentProvider.',\n        );\n      }\n      return myAccountApiClient;\n    },\n    getMyOrgApiClient() {\n      if (!myOrgApiClient) {\n        throw new Error(\n          'myOrgApiClient is not enabled. Please ensure you are in an Auth0 Organization context.',\n        );\n      }\n      return myOrgApiClient;\n    },\n  };\n}\n","import { z } from 'zod';\n\n/**\n * Creates a schema for email-based MFA contact validation with custom error message and optional custom regex\n * @param errorMessage - Custom error message for invalid email\n * @param customRegex - Optional custom regex for email validation\n * @returns Zod schema for email validation\n */\nexport const createEmailContactSchema = (errorMessage?: string, customRegex?: RegExp) =>\n  z.object({\n    contact: customRegex\n      ? z\n          .string()\n          .regex(customRegex, { message: errorMessage || 'Please enter a valid email address' })\n      : z.string().email({ message: errorMessage || 'Please enter a valid email address' }),\n  });\n\n/**\n * Default schema for email-based MFA contact validation\n */\nexport const EmailContactSchema = createEmailContactSchema();\n\n/**\n * Type for email contact form data\n */\nexport type EmailContactForm = z.infer<typeof EmailContactSchema>;\n","import { z } from 'zod';\n\n/**\n * Regular expression for phone number validation\n * Accepts international format with optional + prefix, spaces, hyphens, and parentheses\n */\nconst phoneRegex = /^\\+?[0-9\\s\\-()]{8,}$/;\n\n/**\n * Creates a schema for SMS-based MFA contact validation with custom error message and optional custom regex\n * @param errorMessage - Custom error message for invalid phone number\n * @param customRegex - Optional custom regex for phone number validation\n * @returns Zod schema for phone number validation\n */\nexport const createSmsContactSchema = (errorMessage?: string, customRegex?: RegExp) =>\n  z.object({\n    contact: z.string().regex(customRegex || phoneRegex, {\n      message: errorMessage || 'Please enter a valid phone number',\n    }),\n  });\n\n/**\n * Default schema for SMS-based MFA contact validation\n */\nexport const SmsContactSchema = createSmsContactSchema();\n\n/**\n * Type for SMS contact form data\n */\nexport type SmsContactForm = z.infer<typeof SmsContactSchema>;\n","import { z } from 'zod';\n\nexport interface StringValidationOptions {\n  required?: boolean;\n  regex?: RegExp;\n  minLength?: number;\n  maxLength?: number;\n  errorMessage?: string;\n}\n\nexport interface LogoValidationOptions {\n  required?: boolean;\n  regex?: RegExp;\n  errorMessage?: string;\n}\n\nexport interface DomainValidationOptions {\n  required?: boolean;\n  regex?: RegExp;\n  errorMessage?: string;\n}\n\nexport interface BooleanFieldOptions {\n  required?: boolean;\n  errorMessage?: string;\n}\n\nexport interface FieldOptions {\n  required?: boolean;\n  regex?: RegExp;\n  errorMessage?: string;\n  minLength?: number;\n  maxLength?: number;\n}\n\nexport const createStringSchema = (options: StringValidationOptions = {}) => {\n  const { required = true, regex, minLength, maxLength, errorMessage } = options;\n\n  // Start with base schema\n  let schema = z.string();\n\n  // Add validations for required fields\n  if (required) {\n    const requiredLength = minLength && minLength > 0 ? minLength : 1;\n    schema = schema.min(\n      requiredLength,\n      errorMessage || `Minimum ${requiredLength} characters required`,\n    );\n\n    if (maxLength) {\n      schema = schema.max(maxLength, `Maximum ${maxLength} characters allowed`);\n    }\n\n    if (regex) {\n      schema = schema.regex(regex, errorMessage || 'Invalid format');\n    }\n\n    return schema;\n  }\n\n  // Handle optional fields\n  return z\n    .string()\n    .optional()\n    .refine(\n      (val) => {\n        if (!val) return true;\n\n        if (minLength && val.length < minLength) return false;\n        if (maxLength && val.length > maxLength) return false;\n        if (regex && !regex.test(val)) return false;\n\n        return true;\n      },\n      {\n        message: errorMessage || 'Invalid format',\n      },\n    );\n};\n\nexport const createLogoSchema = (options: LogoValidationOptions = {}) => {\n  const { required = false, regex, errorMessage } = options;\n\n  const message = errorMessage || 'Please enter a valid HTTP';\n\n  // Custom regex validation\n  if (regex) {\n    return required\n      ? z.string().min(1, message).regex(regex, message)\n      : z\n          .string()\n          .optional()\n          .refine((val) => !val || regex.test(val), { message });\n  }\n\n  // Default URL validation\n  const urlValidator = (val: string) => {\n    const isValidUrl = z.string().url().safeParse(val).success;\n    const isHttpProtocol = val.startsWith('http://') || val.startsWith('https://');\n    return isValidUrl && isHttpProtocol;\n  };\n\n  return required\n    ? z.string().min(1, message).refine(urlValidator, { message })\n    : z\n        .string()\n        .optional()\n        .refine((val) => !val || urlValidator(val), { message });\n};\n\n/**\n * Regex pattern for validating domain URLs in a flexible way\n * Accepts:\n * - Domain names: example.com, sub.example.com\n * - With protocol: https://example.com, http://example.com\n * - With port: example.com:8080\n * - With path: example.com/path\n * - Localhost and IPs: localhost, 192.168.1.1\n */\nexport const DOMAIN_REGEX =\n  /^(?:https?:\\/\\/)?(?:[\\w-]+\\.)*[\\w-]+(?:\\.\\w{2,})?(?::\\d{1,5})?(?:\\/[\\w\\-./?%&=]*)?$/i;\n\nexport const createDomainSchema = (options: DomainValidationOptions = {}) => {\n  const { required = true, regex, errorMessage } = options;\n\n  const message =\n    errorMessage || 'Please enter a valid domain (e.g., example.com or https://example.com)';\n\n  // Custom regex validation\n  if (regex) {\n    return required\n      ? z.string().min(1, message).regex(regex, message)\n      : z\n          .string()\n          .optional()\n          .refine((val) => !val || regex.test(val), { message });\n  }\n\n  // Default domain validation\n  return required\n    ? z.string().min(1, message).regex(DOMAIN_REGEX, message)\n    : z\n        .string()\n        .optional()\n        .refine((val) => !val || DOMAIN_REGEX.test(val), { message });\n};\n\nexport const createBooleanSchema = (options: BooleanFieldOptions = {}) => {\n  const schema = z.boolean({\n    errorMap: () => ({ message: options.errorMessage || 'Invalid boolean value' }),\n  });\n\n  return options.required === false ? schema.optional() : schema;\n};\n\nexport const COMMON_FIELD_CONFIGS = {\n  domain: {\n    defaultError: 'Please enter a valid domain',\n    regex: undefined as RegExp | undefined,\n  },\n  client_id: {\n    defaultError: 'Please enter a valid client ID',\n    regex: undefined as RegExp | undefined,\n  },\n  client_secret: {\n    defaultError: 'Please enter a valid client secret',\n    regex: undefined as RegExp | undefined,\n  },\n  icon_url: {\n    defaultError: 'Please enter a valid URL',\n    regex: /^https?:\\/\\/.+/,\n  },\n  callback_url: {\n    defaultError: 'Please enter a valid URL',\n    regex: /^https?:\\/\\/.+/,\n  },\n  url: {\n    defaultError: 'Please enter a valid URL',\n    regex: /^https?:\\/\\/.+/,\n  },\n  certificate: {\n    defaultError: 'Please enter a valid certificate',\n    regex: undefined as RegExp | undefined,\n  },\n  algorithm: {\n    defaultError: 'Please enter a valid algorithm',\n    regex: undefined as RegExp | undefined,\n  },\n  metadata: {\n    defaultError: 'Please enter valid metadata',\n    regex: undefined as RegExp | undefined,\n  },\n  userIdAttribute: {\n    defaultError: 'Please enter a valid user ID attribute',\n    regex: /^[a-zA-Z_][a-zA-Z0-9_]*$/ as RegExp | undefined,\n  },\n} as const;\n\nexport type FieldConfig = (typeof COMMON_FIELD_CONFIGS)[keyof typeof COMMON_FIELD_CONFIGS];\n\nexport const createFieldSchema = (\n  fieldConfig: FieldConfig,\n  options: FieldOptions = {},\n  customError?: string,\n) =>\n  createStringSchema({\n    required: options.required ?? false,\n    regex: options.regex ?? fieldConfig.regex ?? undefined,\n    errorMessage: options.errorMessage ?? customError ?? fieldConfig.defaultError,\n    minLength: options.minLength,\n    maxLength: options.maxLength,\n  });\n","import { createStringSchema, createLogoSchema } from '@core/schemas/common';\nimport { z } from 'zod';\n\nimport { type OrgDetailsSchemas } from './organization-details-schema-types';\n\n/**\n * Creates a schema for organization detail form validation\n * @param options - Configuration options for schema validation\n * @returns Zod schema for organization detail validation\n */\nexport const createOrganizationDetailSchema = (options: OrgDetailsSchemas = {}) => {\n  const { name = {}, displayName = {}, color = {}, logoURL = {} } = options;\n\n  // Set defaults for color validation\n  const colorRegex = color.regex || /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;\n  const colorErrorMessage = color.errorMessage || 'Invalid color format';\n\n  return z.object({\n    name: createStringSchema({\n      required: true,\n      errorMessage: name.errorMessage,\n    }),\n    display_name: createStringSchema({\n      required: displayName.required ?? true,\n      regex: displayName.regex,\n      errorMessage: displayName.errorMessage,\n      minLength: displayName.minLength,\n      maxLength: displayName.maxLength,\n    }),\n    branding: z.object({\n      logo_url: createLogoSchema({\n        required: false,\n        regex: logoURL.regex,\n        errorMessage: logoURL.errorMessage,\n      }),\n      colors: z.object({\n        primary: z.string().regex(colorRegex, colorErrorMessage),\n        page_background: z.string().regex(colorRegex, colorErrorMessage),\n      }),\n    }),\n  });\n};\n\n/**\n * Default schema for organization detail form validation\n */\nexport const organizationDetailSchema = createOrganizationDetailSchema();\n\n/**\n * Type for organization detail form data\n */\nexport type InternalOrganizationDetailsFormValues = z.infer<typeof organizationDetailSchema>;\n","export const FACTOR_TYPE_EMAIL = 'email';\nexport const FACTOR_TYPE_PHONE = 'phone';\nexport const FACTOR_TYPE_PUSH_NOTIFICATION = 'push-notification';\nexport const FACTOR_TYPE_TOTP = 'totp';\nexport const FACTOR_TYPE_RECOVERY_CODE = 'recovery-code';\nexport const FACTOR_TYPE_WEBAUTHN_ROAMING = 'webauthn-roaming';\nexport const FACTOR_TYPE_WEBAUTHN_PLATFORM = 'webauthn-platform';\n\n/**\n * Array of all supported MFA factor types for validation and iteration\n */\nexport const SUPPORTED_FACTOR_TYPES = [\n  FACTOR_TYPE_EMAIL,\n  FACTOR_TYPE_PHONE,\n  FACTOR_TYPE_PUSH_NOTIFICATION,\n  FACTOR_TYPE_TOTP,\n  FACTOR_TYPE_RECOVERY_CODE,\n  FACTOR_TYPE_WEBAUTHN_PLATFORM,\n] as const;\n","import {\n  FACTOR_TYPE_EMAIL,\n  FACTOR_TYPE_PHONE,\n  FACTOR_TYPE_PUSH_NOTIFICATION,\n  FACTOR_TYPE_RECOVERY_CODE,\n  FACTOR_TYPE_TOTP,\n  FACTOR_TYPE_WEBAUTHN_PLATFORM,\n  FACTOR_TYPE_WEBAUTHN_ROAMING,\n} from './mfa-constants';\nimport type {\n  MFAType,\n  EnrollOptions,\n  Authenticator,\n  ListFactorsResponseContent,\n  ListAuthenticationMethodsResponseContent,\n  CreateAuthenticationMethodRequestContent,\n} from './mfa-types';\n\nexport function buildEnrollParams(\n  factorType: MFAType,\n  options: EnrollOptions = {},\n): CreateAuthenticationMethodRequestContent {\n  switch (factorType) {\n    case FACTOR_TYPE_EMAIL:\n      if (!options.email) {\n        throw new Error('Email is required for email enrollment');\n      }\n      return {\n        type: FACTOR_TYPE_EMAIL,\n        email: options.email,\n      };\n    case FACTOR_TYPE_PHONE:\n      if (!options.phone_number) {\n        throw new Error('Phone number is required for SMS enrollment');\n      }\n      return {\n        type: FACTOR_TYPE_PHONE,\n        phone_number: options.phone_number,\n      };\n    case FACTOR_TYPE_TOTP:\n      return { type: FACTOR_TYPE_TOTP };\n    case FACTOR_TYPE_WEBAUTHN_ROAMING:\n      return { type: FACTOR_TYPE_WEBAUTHN_ROAMING };\n    case FACTOR_TYPE_WEBAUTHN_PLATFORM:\n      return { type: FACTOR_TYPE_WEBAUTHN_PLATFORM };\n    case FACTOR_TYPE_RECOVERY_CODE:\n      return { type: FACTOR_TYPE_RECOVERY_CODE };\n    case FACTOR_TYPE_PUSH_NOTIFICATION:\n      return { type: FACTOR_TYPE_PUSH_NOTIFICATION };\n    default:\n      throw new Error(`Unsupported factor type: ${factorType}`);\n  }\n}\n\ntype AuthenticationMethod =\n  ListAuthenticationMethodsResponseContent['authentication_methods'][number];\n\ntype EnrolledFactor = AuthenticationMethod & {\n  type: MFAType;\n};\n\nfunction getFactorDisplayName(type: MFAType, enrolledFactor: EnrolledFactor): string {\n  switch (type) {\n    case FACTOR_TYPE_PHONE:\n      return 'phone_number' in enrolledFactor && typeof enrolledFactor.phone_number === 'string'\n        ? enrolledFactor.phone_number || 'SMS'\n        : 'SMS';\n    case FACTOR_TYPE_EMAIL:\n      return 'email' in enrolledFactor && typeof enrolledFactor.email === 'string'\n        ? enrolledFactor.email || 'Email'\n        : 'Email';\n    case FACTOR_TYPE_RECOVERY_CODE:\n      if (enrolledFactor.id && enrolledFactor.id.includes('|')) {\n        const name = enrolledFactor.id.split('|')[1];\n        return name;\n      }\n      return 'Recovery Codes';\n    case FACTOR_TYPE_TOTP:\n      if (enrolledFactor.id && enrolledFactor.id.includes('|')) {\n        const name = enrolledFactor.id.split('|')[1];\n        return name;\n      }\n      return 'Authenticator App';\n    default:\n      return 'name' in enrolledFactor && enrolledFactor.name ? enrolledFactor.name : type;\n  }\n}\n\nfunction createAuthenticator(\n  type: MFAType,\n  id: string,\n  enrolled: boolean,\n  created_at: string | null,\n  enrolledFactor?: EnrolledFactor,\n): Authenticator {\n  return {\n    id,\n    type,\n    enrolled,\n    name: enrolledFactor ? getFactorDisplayName(type, enrolledFactor) : type,\n    created_at,\n  };\n}\n\nexport function transformMyAccountFactors(\n  availableFactorsResponse: ListFactorsResponseContent,\n  enrolledFactors: ListAuthenticationMethodsResponseContent,\n  onlyActive: boolean,\n): Partial<Record<MFAType, Authenticator[]>> {\n  const result: Partial<Record<MFAType, Authenticator[]>> = {};\n\n  const confirmedFactors = enrolledFactors.authentication_methods.filter(\n    (factor): factor is EnrolledFactor => {\n      return !('confirmed' in factor) || factor.confirmed !== false;\n    },\n  );\n\n  if (onlyActive) {\n    // Only return confirmed enrolled factors\n    for (const factor of confirmedFactors) {\n      const mfaType = factor.type;\n\n      if (!result[mfaType]) {\n        result[mfaType] = [];\n      }\n\n      result[mfaType]!.push(\n        createAuthenticator(mfaType, factor.id, true, factor.created_at, factor),\n      );\n    }\n    return result;\n  }\n\n  // Full listing: enrolled + unenrolled placeholders\n  const enrolledByType = new Map<MFAType, EnrolledFactor[]>();\n\n  // Group confirmed enrolled factors by type\n  for (const factor of confirmedFactors) {\n    const mfaType = factor.type;\n    if (!enrolledByType.has(mfaType)) {\n      enrolledByType.set(mfaType, []);\n    }\n    enrolledByType.get(mfaType)!.push(factor);\n  }\n\n  // Process all available factor types\n  for (const availableFactor of availableFactorsResponse.factors) {\n    const mfaType = availableFactor.type as MFAType;\n\n    const skipFactors = [FACTOR_TYPE_WEBAUTHN_PLATFORM, FACTOR_TYPE_WEBAUTHN_ROAMING];\n    if (skipFactors.includes(mfaType)) {\n      continue;\n    }\n\n    if (!result[mfaType]) {\n      result[mfaType] = [];\n    }\n\n    const enrolled = enrolledByType.get(mfaType) || [];\n\n    if (enrolled.length > 0) {\n      // Add enrolled factors\n      for (const factor of enrolled) {\n        result[mfaType]!.push(\n          createAuthenticator(mfaType, factor.id, true, factor.created_at, factor),\n        );\n      }\n    } else {\n      // Add placeholder for unenrolled factor type\n      result[mfaType]!.push(createAuthenticator(mfaType, `placeholder-${mfaType}`, false, null));\n    }\n  }\n\n  return result;\n}\n","import type {\n  MFAType,\n  Authenticator,\n  ConfirmEnrollmentOptions,\n  VerifyAuthenticationMethodRequestContent,\n  EnrollOptions,\n  ListFactorsResponseContent,\n  ListAuthenticationMethodsResponseContent,\n} from './mfa-types';\nimport { transformMyAccountFactors, buildEnrollParams } from './mfa-utils';\n\nexport const MFAMappers = {\n  fromAPI(\n    availableFactorsResponse: ListFactorsResponseContent,\n    enrolledFactorsResponse: ListAuthenticationMethodsResponseContent,\n    onlyActive: boolean = false,\n  ): Record<MFAType, Authenticator[]> {\n    return transformMyAccountFactors(\n      availableFactorsResponse,\n      enrolledFactorsResponse,\n      onlyActive,\n    ) as Record<MFAType, Authenticator[]>;\n  },\n  buildEnrollParams(factorType: MFAType, options: EnrollOptions = {}) {\n    return buildEnrollParams(factorType, options);\n  },\n\n  buildConfirmEnrollmentParams(\n    factorType: MFAType,\n    authSession: string,\n    options: ConfirmEnrollmentOptions,\n  ): VerifyAuthenticationMethodRequestContent {\n    const baseParams = { auth_session: authSession };\n    return ['totp', 'phone', 'email'].includes(factorType) && options.userOtpCode?.trim()\n      ? { ...baseParams, otp_code: options.userOtpCode.trim() }\n      : baseParams;\n  },\n};\n","export const USER_MFA_SCOPES =\n  'create:me:authentication_methods read:me:authentication_methods delete:me:authentication_methods update:me:authentication_methods read:me:factors';\n","export const DEFAULT_COLORS = {\n  UL_PRIMARY: '#0059d6',\n  UL_PAGE_BG: '#000000',\n};\n","import { DEFAULT_COLORS } from './org-details-constants';\nimport type { OrganizationPrivate } from './org-details-types';\n\nexport const OrgDetailsFactory = {\n  create: (): OrganizationPrivate => {\n    return {\n      id: '',\n      name: '',\n      display_name: '',\n      branding: {\n        logo_url: '',\n        colors: {\n          primary: DEFAULT_COLORS.UL_PRIMARY,\n          page_background: DEFAULT_COLORS.UL_PAGE_BG,\n        },\n      },\n    };\n  },\n};\n","import { DEFAULT_COLORS } from './org-details-constants';\nimport type { OrganizationPrivate } from './org-details-types';\nimport type {\n  GetOrganizationDetailsResponseContent,\n  UpdateOrganizationDetailsRequestContent,\n} from './org-details-types';\n\nexport const OrgDetailsMappers = {\n  fromAPI(orgData: GetOrganizationDetailsResponseContent): OrganizationPrivate {\n    return {\n      id: orgData.id || '',\n      name: orgData.name || '',\n      display_name: orgData.display_name || '',\n      branding: {\n        logo_url: orgData.branding?.logo_url || '',\n        colors: {\n          primary: orgData.branding?.colors?.primary || DEFAULT_COLORS.UL_PRIMARY,\n          page_background: orgData.branding?.colors?.page_background || DEFAULT_COLORS.UL_PAGE_BG,\n        },\n      },\n    };\n  },\n  toAPI(formValues: OrganizationPrivate): UpdateOrganizationDetailsRequestContent {\n    const updateLogo =\n      formValues.branding.logo_url !== undefined &&\n      formValues.branding.logo_url !== '' &&\n      formValues.branding.logo_url.trim() !== '';\n\n    const payload: UpdateOrganizationDetailsRequestContent = {\n      display_name: formValues.display_name,\n      branding: {\n        colors: {\n          primary: formValues.branding.colors.primary,\n          page_background: formValues.branding.colors.page_background,\n        },\n      },\n    };\n    if (updateLogo) {\n      payload.branding!.logo_url = formValues.branding.logo_url;\n    }\n\n    return payload;\n  },\n};\n","import type { IdpStrategy } from './sso-provider-types';\n\nexport const STRATEGIES = {\n  ADFS: 'adfs',\n  GOOGLE_APPS: 'google-apps',\n  OIDC: 'oidc',\n  OKTA: 'okta',\n  PINGFEDERATE: 'pingfederate',\n  SAMLP: 'samlp',\n  WAAD: 'waad',\n} as const;\n\nexport const AVAILABLE_STRATEGY_LIST: IdpStrategy[] = Object.values(STRATEGIES);\n\nexport const STRATEGY_DISPLAY_NAMES: Record<IdpStrategy, string> = {\n  [STRATEGIES.ADFS]: 'ADFS',\n  [STRATEGIES.GOOGLE_APPS]: 'Google Workspace',\n  [STRATEGIES.OIDC]: 'Custom OIDC',\n  [STRATEGIES.OKTA]: 'Okta',\n  [STRATEGIES.PINGFEDERATE]: 'PingFederate',\n  [STRATEGIES.SAMLP]: 'Custom SAML',\n  [STRATEGIES.WAAD]: 'Entra ID',\n} as const;\n","import type {\n  ProviderDetailsFormValues,\n  ProviderSelectionFormValues,\n  ProviderConfigureFormValues,\n} from '@core/schemas';\n\nimport { STRATEGIES } from './sso-provider-constants';\nimport type { IdpStrategy } from './sso-provider-types';\nimport type {\n  CreateIdentityProviderRequestContent,\n  UpdateIdentityProviderRequestContent,\n} from './sso-provider-types';\n\ntype CombinedProviderFormValues = ProviderSelectionFormValues &\n  ProviderDetailsFormValues & {\n    options: ProviderConfigureFormValues;\n  };\n\ntype UpdateProviderFormValues = Partial<ProviderDetailsFormValues> & {\n  strategy?: IdpStrategy;\n  options?: Partial<ProviderConfigureFormValues>;\n  is_enabled?: boolean;\n  show_as_button?: boolean;\n  assign_membership_on_login?: boolean;\n};\n\nconst STRATEGY_FIELD_MAPPINGS = {\n  [STRATEGIES.OKTA]: ['domain', 'client_id', 'client_secret', 'icon_url'],\n  [STRATEGIES.ADFS]: ['adfs_server', 'fedMetadataXml'],\n  [STRATEGIES.GOOGLE_APPS]: ['domain', 'client_id', 'client_secret', 'icon_url'],\n  [STRATEGIES.OIDC]: ['type', 'client_id', 'client_secret', 'discovery_url'],\n  [STRATEGIES.PINGFEDERATE]: [\n    'signatureAlgorithm',\n    'digestAlgorithm',\n    'signSAMLRequest',\n    'metadataUrl',\n    'cert',\n    'signingCert',\n    'idpInitiated',\n    'icon_url',\n  ],\n  [STRATEGIES.SAMLP]: [\n    'signatureAlgorithm',\n    'digestAlgorithm',\n    'protocolBinding',\n    'signSAMLRequest',\n    'bindingMethod',\n    'metadataUrl',\n    'cert',\n    'idpInitiated',\n    'icon_url',\n  ],\n  [STRATEGIES.WAAD]: ['domain', 'client_id', 'client_secret', 'icon_url'],\n} as const;\n\n/**\n * Filters and validates form options based on strategy-specific API requirements.\n */\nconst getValidOptionsForStrategy = (\n  strategy: IdpStrategy,\n  formOptions: Record<string, unknown>,\n): Record<string, unknown> => {\n  const isValidValue = (value: unknown): boolean =>\n    value !== undefined && value !== null && value !== '';\n\n  const validFields = STRATEGY_FIELD_MAPPINGS[strategy] as readonly string[];\n\n  if (!validFields) {\n    throw new Error(`Unsupported identity provider strategy: ${strategy}`);\n  }\n\n  return Object.fromEntries(\n    Object.entries(formOptions).filter(\n      ([key, value]) => validFields.includes(key) && isValidValue(value),\n    ),\n  );\n};\n\nexport const SsoProviderMappers = {\n  /**\n   * Transforms form data to API request format for creating SSO providers.\n   * Filters out form-specific fields and includes only strategy-valid API fields.\n   */\n  createToAPI(data: CombinedProviderFormValues): CreateIdentityProviderRequestContent {\n    const { strategy, name, display_name, options } = data;\n\n    if (!name || name.trim() === '') {\n      throw new Error('Provider name is required');\n    }\n\n    return {\n      strategy,\n      name: name.trim(),\n      display_name,\n      options: getValidOptionsForStrategy(strategy, options),\n    };\n  },\n\n  /**\n   * Transforms form data to API request format for updating SSO providers.\n   * Only includes fields that have been modified and are valid for the strategy.\n   */\n  updateToAPI(data: UpdateProviderFormValues): UpdateIdentityProviderRequestContent {\n    const {\n      strategy,\n      display_name,\n      is_enabled,\n      show_as_button,\n      assign_membership_on_login,\n      ...configOptions\n    } = data;\n\n    const updateRequest: UpdateIdentityProviderRequestContent = {};\n\n    // Only include defined values for core fields\n    if (display_name !== undefined) {\n      updateRequest.display_name = display_name;\n    }\n    if (is_enabled !== undefined) {\n      updateRequest.is_enabled = is_enabled;\n    }\n    if (show_as_button !== undefined) {\n      updateRequest.show_as_button = show_as_button;\n    }\n    if (assign_membership_on_login !== undefined) {\n      updateRequest.assign_membership_on_login = assign_membership_on_login;\n    }\n\n    // Add filtered options if strategy exists and config options are provided\n    if (strategy && Object.keys(configOptions).length > 0) {\n      const validOptions = getValidOptionsForStrategy(strategy, configOptions);\n      if (Object.keys(validOptions).length > 0) {\n        updateRequest.options = validOptions;\n      }\n    }\n\n    return updateRequest;\n  },\n};\n","export const MY_ORG_DETAILS_EDIT_SCOPES = 'read:my_org:details update:my_org:details';\nexport const MY_ORG_SSO_PROVIDER_TABLE_SCOPES =\n  'read:my_org:details read:my_org:identity_providers create:my_org:identity_providers update:my_org:identity_providers delete:my_org:identity_providers update:my_org:identity_providers_detach';\nexport const MY_ORG_SSO_PROVIDER_CREATE_SCOPES =\n  'read:my_org:identity_providers create:my_org:identity_providers';\nexport const MY_ORG_SSO_PROVIDER_EDIT_SCOPES =\n  'read:my_org:details update:my_org:details read:my_org:identity_providers create:my_org:identity_providers update:my_org:identity_providers delete:my_org:identity_providers update:my_org:identity_providers_detach read:my_org:identity_provider_provisioning create:my_org:identity_provider_provisioning delete:my_org:identity_provider_provisioning read:my_org:identity_providers_domains create:my_org:identity_provider_domains delete:my_org:identity_provider_domains read:my_org:scim_tokens create:my_org:scim_tokens delete:my_org:scim_tokens read:my_org:domains delete:my_org:domains create:my_org:domains update:my_org:domains';\nexport const MY_ORG_DOMAIN_SCOPES =\n  'read:my_org:domains delete:my_org:domains create:my_org:domains update:my_org:domains read:my_org:identity_providers create:my_org:identity_provider_domains delete:my_org:identity_provider_domains read:my_org:identity_providers_domains';\n","import {\n  createBooleanSchema,\n  createFieldSchema,\n  COMMON_FIELD_CONFIGS,\n  type FieldOptions,\n  type BooleanFieldOptions,\n} from '@core/schemas/common';\nimport type { IdpStrategy } from '@core/services';\nimport { AVAILABLE_STRATEGY_LIST } from '@core/services';\nimport { z } from 'zod';\n\nimport type {\n  ProviderConfigureSchema,\n  ProviderSelectionSchema,\n  ProviderDetailsSchema,\n  SsoProviderSchema,\n} from './sso-provider-create-schema-types';\n\ninterface OktaOptions {\n  domain?: FieldOptions;\n  client_id?: FieldOptions;\n  client_secret?: FieldOptions;\n  icon_url?: FieldOptions;\n  callback_url?: FieldOptions;\n}\n\ninterface AdfsOptions {\n  meta_data_source?: FieldOptions;\n  meta_data_location_url?: FieldOptions;\n  adfs_server?: FieldOptions;\n  fedMetadataXml?: FieldOptions;\n}\n\ninterface GoogleAppsOptions {\n  domain?: FieldOptions;\n  client_id?: FieldOptions;\n  client_secret?: FieldOptions;\n  icon_url?: FieldOptions;\n  callback_url?: FieldOptions;\n}\n\ninterface OidcOptions {\n  type?: FieldOptions;\n  client_id?: FieldOptions;\n  client_secret?: FieldOptions;\n  discovery_url?: FieldOptions;\n  isFrontChannel?: boolean;\n}\n\ninterface PingFederateOptions {\n  pingFederateBaseUrl?: FieldOptions;\n  signatureAlgorithm?: FieldOptions;\n  digestAlgorithm?: FieldOptions;\n  signSAMLRequest?: BooleanFieldOptions;\n  signingCert?: FieldOptions;\n  cert?: FieldOptions;\n  icon_url?: FieldOptions;\n  idpInitiated?: FieldOptions;\n}\n\ninterface SamlpOptions {\n  signatureAlgorithm?: FieldOptions;\n  digestAlgorithm?: FieldOptions;\n  protocolBinding?: FieldOptions;\n  signSAMLRequest?: BooleanFieldOptions;\n  bindingMethod?: FieldOptions;\n  metadataUrl?: FieldOptions;\n  single_sign_on_login_url?: FieldOptions;\n  cert?: FieldOptions;\n  icon_url?: FieldOptions;\n  idpInitiated?: FieldOptions;\n}\n\ninterface WaadOptions {\n  tenant_domain?: FieldOptions;\n  client_id?: FieldOptions;\n  client_secret?: FieldOptions;\n  icon_url?: FieldOptions;\n  callback_url?: FieldOptions;\n}\n\nconst STRATEGY_BUILDERS = {\n  okta: (options: OktaOptions = {}) =>\n    z.object({\n      domain: createFieldSchema(\n        COMMON_FIELD_CONFIGS.domain,\n        { ...options.domain, required: true },\n        'Please enter a valid Okta domain',\n      ),\n      client_id: createFieldSchema(COMMON_FIELD_CONFIGS.client_id, {\n        ...options.client_id,\n        required: true,\n      }),\n      client_secret: createFieldSchema(COMMON_FIELD_CONFIGS.client_secret, {\n        ...options.client_secret,\n        required: true,\n      }),\n      icon_url: createFieldSchema(COMMON_FIELD_CONFIGS.icon_url, {\n        ...options.icon_url,\n        required: false,\n      }),\n      callback_url: createFieldSchema(COMMON_FIELD_CONFIGS.callback_url, {\n        ...options.callback_url,\n        required: false,\n      }),\n    }),\n\n  adfs: (options: AdfsOptions = {}) =>\n    z\n      .object({\n        meta_data_source: z\n          .string({\n            required_error: 'Please enter a metadata source',\n          })\n          .min(1, 'Metadata source is required'),\n        meta_data_location_url: createFieldSchema(\n          COMMON_FIELD_CONFIGS.url,\n          options.meta_data_location_url,\n          'Please enter a valid metadata location URL',\n        ),\n        adfs_server: createFieldSchema(\n          COMMON_FIELD_CONFIGS.url,\n          { ...options.adfs_server, required: false },\n          'Please enter a valid ADFS server URL',\n        ),\n        fedMetadataXml: createFieldSchema(\n          COMMON_FIELD_CONFIGS.metadata,\n          { ...options.fedMetadataXml, required: false },\n          'Please enter valid Federation Metadata XML',\n        ),\n      })\n      .refine((data) => data.adfs_server || data.fedMetadataXml, {\n        message: 'Either ADFS server URL or Federation Metadata XML is required',\n        path: ['adfs_server'],\n      }),\n\n  'google-apps': (options: GoogleAppsOptions = {}) =>\n    z.object({\n      domain: createFieldSchema(\n        COMMON_FIELD_CONFIGS.domain,\n        { ...options.domain, required: true },\n        'Please enter a valid Google Workspace domain',\n      ),\n      client_id: createFieldSchema(COMMON_FIELD_CONFIGS.client_id, {\n        ...options.client_id,\n        required: true,\n      }),\n      client_secret: createFieldSchema(COMMON_FIELD_CONFIGS.client_secret, {\n        ...options.client_secret,\n        required: true,\n      }),\n      icon_url: createFieldSchema(COMMON_FIELD_CONFIGS.icon_url, {\n        ...options.icon_url,\n        required: false,\n      }),\n      callback_url: createFieldSchema(COMMON_FIELD_CONFIGS.callback_url, {\n        ...options.callback_url,\n        required: false,\n      }),\n    }),\n\n  oidc: (options: OidcOptions = {}) => {\n    const baseSchema = z.object({\n      type: createFieldSchema(\n        COMMON_FIELD_CONFIGS.algorithm,\n        { ...options.type, required: true },\n        'Please enter a valid type',\n      ),\n      client_id: createFieldSchema(COMMON_FIELD_CONFIGS.client_id, {\n        ...options.client_id,\n        required: true,\n      }),\n      client_secret: createFieldSchema(COMMON_FIELD_CONFIGS.client_secret, {\n        ...options.client_secret,\n        required: true,\n      }),\n      discovery_url: createFieldSchema(\n        COMMON_FIELD_CONFIGS.url,\n        { ...options.discovery_url, required: true },\n        'Please enter a valid discovery URL',\n      ),\n    });\n\n    // Add conditional validation for client_secret\n    return baseSchema.superRefine((data, ctx) => {\n      const isFrontChannel = data.type === 'front_channel';\n\n      // Only require client_secret for back_channel\n      if (!isFrontChannel) {\n        if (!data.client_secret || data.client_secret.trim() === '') {\n          ctx.addIssue({\n            code: z.ZodIssueCode.custom,\n            message: 'Client secret is required',\n            path: ['client_secret'],\n          });\n        }\n      }\n    });\n  },\n\n  pingfederate: (options: PingFederateOptions = {}) =>\n    z.object({\n      pingFederateBaseUrl: createFieldSchema(\n        COMMON_FIELD_CONFIGS.url,\n        { ...options.pingFederateBaseUrl, required: true },\n        'Please enter a valid PingFederate base URL',\n      ),\n      signatureAlgorithm: createFieldSchema(\n        COMMON_FIELD_CONFIGS.algorithm,\n        { ...options.signatureAlgorithm, required: true },\n        'Please enter a valid signature algorithm',\n      ),\n      digestAlgorithm: createFieldSchema(\n        COMMON_FIELD_CONFIGS.algorithm,\n        { ...options.digestAlgorithm, required: true },\n        'Please enter a valid digest algorithm',\n      ),\n      signSAMLRequest: createBooleanSchema({\n        required: true,\n        errorMessage:\n          options.signSAMLRequest?.errorMessage ?? 'SAML request signing option is required',\n      }),\n      signingCert: createFieldSchema(\n        COMMON_FIELD_CONFIGS.certificate,\n        { ...options.signingCert, required: true },\n        'Please enter a valid signing certificate',\n      ),\n      cert: createFieldSchema(COMMON_FIELD_CONFIGS.certificate, {\n        ...options.cert,\n        required: false,\n      }),\n      idpInitiated: z\n        .object({\n          enabled: z.boolean().optional(),\n          client_id: z.string().optional(),\n          client_protocol: z.string().optional(),\n          client_authorizequery: z.string().optional(),\n        })\n        .optional(),\n      icon_url: createFieldSchema(COMMON_FIELD_CONFIGS.icon_url, {\n        ...options.icon_url,\n        required: false,\n      }),\n    }),\n\n  samlp: (options: SamlpOptions = {}) =>\n    z.object({\n      meta_data_source: z\n        .string({\n          required_error: 'Please enter a metadata source',\n        })\n        .min(1, 'Metadata source is required'),\n      single_sign_on_login_url: createFieldSchema(\n        COMMON_FIELD_CONFIGS.url,\n        { ...options.single_sign_on_login_url, required: false },\n        'Please enter a valid URL',\n      ),\n      signatureAlgorithm: createFieldSchema(\n        COMMON_FIELD_CONFIGS.algorithm,\n        { ...options.signatureAlgorithm, required: false },\n        'Please enter a valid signature algorithm',\n      ),\n      digestAlgorithm: createFieldSchema(\n        COMMON_FIELD_CONFIGS.algorithm,\n        { ...options.digestAlgorithm, required: false },\n        'Please enter a valid digest algorithm',\n      ),\n      protocolBinding: createFieldSchema(\n        COMMON_FIELD_CONFIGS.algorithm,\n        { ...options.protocolBinding, required: false },\n        'Please enter a valid protocol binding',\n      ),\n      signSAMLRequest: createBooleanSchema({\n        required: true,\n        errorMessage:\n          options.signSAMLRequest?.errorMessage ?? 'SAML request signing option is required',\n      }),\n      bindingMethod: createFieldSchema(\n        COMMON_FIELD_CONFIGS.algorithm,\n        { ...options.bindingMethod, required: false },\n        'Please enter a valid binding method',\n      ),\n      metadataUrl: createFieldSchema(\n        COMMON_FIELD_CONFIGS.url,\n        { ...options.metadataUrl, required: true },\n        'Please enter a valid metadata URL',\n      ),\n      cert: createFieldSchema(COMMON_FIELD_CONFIGS.certificate, {\n        ...options.cert,\n        required: true,\n      }),\n      idpInitiated: z\n        .object({\n          enabled: z.boolean().optional(),\n          client_id: z.string().optional(),\n          client_protocol: z.string().optional(),\n          client_authorizequery: z.string().optional(),\n        })\n        .optional(),\n      icon_url: createFieldSchema(COMMON_FIELD_CONFIGS.icon_url, {\n        ...options.icon_url,\n        required: false,\n      }),\n    }),\n\n  waad: (options: WaadOptions = {}) =>\n    z.object({\n      tenant_domain: createFieldSchema(\n        COMMON_FIELD_CONFIGS.domain,\n        { ...options.tenant_domain, required: true },\n        'Please enter a valid Azure AD tenant domain',\n      ),\n      client_id: createFieldSchema(COMMON_FIELD_CONFIGS.client_id, {\n        ...options.client_id,\n        required: true,\n      }),\n      client_secret: createFieldSchema(COMMON_FIELD_CONFIGS.client_secret, {\n        ...options.client_secret,\n        required: true,\n      }),\n      icon_url: createFieldSchema(COMMON_FIELD_CONFIGS.icon_url, {\n        ...options.icon_url,\n        required: false,\n      }),\n      callback_url: createFieldSchema(COMMON_FIELD_CONFIGS.callback_url, {\n        ...options.callback_url,\n        required: false,\n      }),\n    }),\n} as const;\n\n/**\n * Creates a schema for Step 1: Provider Selection\n */\n\nexport const createProviderSelectionSchema = (options: ProviderSelectionSchema = {}) => {\n  const { strategy = {} } = options;\n  return z.object({\n    strategy: z.enum(AVAILABLE_STRATEGY_LIST as [IdpStrategy, ...IdpStrategy[]], {\n      required_error: strategy.errorMessage || 'Please select a provider strategy',\n      invalid_type_error: strategy.errorMessage || 'Please select a valid provider strategy',\n    }),\n  });\n};\n\n/**\n * Creates a schema for Step 2: Provider Details\n */\nexport const createProviderDetailsSchema = (options: ProviderDetailsSchema = {}) => {\n  const { name = {}, displayName = {} } = options;\n\n  return z.object({\n    name: z\n      .string({\n        required_error: name.errorMessage || 'Please enter a valid provider name',\n      })\n      .min(1, 'Provider name is required')\n      .regex(\n        name.regex || /^[a-zA-Z0-9](-[a-zA-Z0-9]|[a-zA-Z0-9])*$/,\n        \"The name of the connection. Must start and end with an alphanumeric character and can only contain alphanumeric characters and '-'. Max length 128\",\n      ),\n    display_name: z\n      .string({\n        required_error: displayName.errorMessage || 'Please enter a valid display name',\n      })\n      .min(1, 'Display name is required')\n      .regex(\n        displayName.regex || /.*/,\n        displayName.errorMessage || 'Please enter a valid display name',\n      ),\n  });\n};\n\ntype StrategySchemaMap = {\n  okta: ReturnType<typeof STRATEGY_BUILDERS.okta>;\n  adfs: ReturnType<typeof STRATEGY_BUILDERS.adfs>;\n  'google-apps': ReturnType<(typeof STRATEGY_BUILDERS)['google-apps']>;\n  oidc: ReturnType<typeof STRATEGY_BUILDERS.oidc>;\n  pingfederate: ReturnType<(typeof STRATEGY_BUILDERS)['pingfederate']>;\n  samlp: ReturnType<typeof STRATEGY_BUILDERS.samlp>;\n  waad: ReturnType<typeof STRATEGY_BUILDERS.waad>;\n};\n\n/**\n * Creates a dynamic schema for Step 3: Provider Configuration based on strategy\n */\nexport function createProviderConfigureSchema<T extends IdpStrategy>(\n  strategy: T,\n  options: ProviderConfigureSchema = {},\n): StrategySchemaMap[T] {\n  const strategyOptions = { ...(options[strategy] || {}) };\n  const builder = STRATEGY_BUILDERS[strategy];\n\n  if (!builder) {\n    throw new Error(`Unsupported strategy: ${strategy}`);\n  }\n\n  return builder(strategyOptions as Parameters<typeof builder>[0]) as StrategySchemaMap[T];\n}\n\n/**\n * Creates a complete schema for SSO provider form validation\n */\n/**\n * Creates a complete schema for SSO provider form validation that combines all three steps\n */\nexport const createSsoProviderSchema = (options: SsoProviderSchema = {}) => {\n  const selectionSchema = createProviderSelectionSchema(options);\n  const detailsSchema = createProviderDetailsSchema(options);\n  return selectionSchema.merge(detailsSchema);\n};\n\nexport const providerSelectionSchema = createProviderSelectionSchema();\nexport const providerDetailsSchema = createProviderDetailsSchema();\nexport const ssoProviderSchema = createSsoProviderSchema();\n\nexport type ProviderSelectionFormValues = z.infer<typeof providerSelectionSchema>;\nexport type ProviderDetailsFormValues = z.infer<typeof providerDetailsSchema>;\nexport type SsoProviderFormValues = z.infer<typeof ssoProviderSchema>;\n\nexport type OktaConfigureFormValues = z.infer<ReturnType<typeof STRATEGY_BUILDERS.okta>>;\nexport type AdfsConfigureFormValues = z.infer<ReturnType<typeof STRATEGY_BUILDERS.adfs>>;\nexport type GoogleAppsConfigureFormValues = z.infer<\n  ReturnType<(typeof STRATEGY_BUILDERS)['google-apps']>\n>;\nexport type OidcConfigureFormValues = z.infer<ReturnType<typeof STRATEGY_BUILDERS.oidc>>;\nexport type PingFederateConfigureFormValues = z.infer<\n  ReturnType<(typeof STRATEGY_BUILDERS)['pingfederate']>\n>;\nexport type SamlpConfigureFormValues = z.infer<ReturnType<typeof STRATEGY_BUILDERS.samlp>>;\nexport type WaadConfigureFormValues = z.infer<ReturnType<typeof STRATEGY_BUILDERS.waad>>;\n\nexport type ProviderConfigureFormValues =\n  | OktaConfigureFormValues\n  | AdfsConfigureFormValues\n  | GoogleAppsConfigureFormValues\n  | OidcConfigureFormValues\n  | PingFederateConfigureFormValues\n  | SamlpConfigureFormValues\n  | WaadConfigureFormValues;\n","import { z } from 'zod';\n\nimport type { SsoProviderDeleteSchema } from './sso-provider-delete-schema-types';\n\n/**\n * Creates a schema for delete SSO provider confirmation\n */\nexport const createDeleteProviderSchema = (\n  expectedProviderName: string,\n  options: SsoProviderDeleteSchema = {},\n) => {\n  const { providerName = {} } = options;\n\n  return z.object({\n    providerName: z\n      .string({\n        required_error: providerName.errorMessage || 'Provider name is required',\n      })\n      .refine((value) => value === (providerName.exactMatch || expectedProviderName), {\n        message: `Please enter \"${providerName.exactMatch || expectedProviderName}\" to confirm deletion`,\n      }),\n  });\n};\n\n/**\n * Default schema for delete provider validation\n */\nexport const deleteProviderSchema = (expectedProviderName: string) =>\n  createDeleteProviderSchema(expectedProviderName);\n\n/**\n * Type definitions\n */\nexport type DeleteProviderFormValues = z.infer<ReturnType<typeof deleteProviderSchema>>;\n","import { createFieldSchema, COMMON_FIELD_CONFIGS } from '@core/schemas/common';\nimport { z } from 'zod';\n\nimport type {\n  ProvisioningDetailsSchema,\n  SsoProvisioningSchema,\n} from './sso-provisioning-edit-schema-types';\n\n/**\n * Creates a schema for Provisioning Details form validation\n */\nexport const createProvisioningDetailsSchema = (options: ProvisioningDetailsSchema = {}) => {\n  const { userIdAttribute = {}, scimEndpointUrl = {} } = options;\n\n  return z.object({\n    userIdAttribute: createFieldSchema(\n      COMMON_FIELD_CONFIGS.userIdAttribute,\n      {\n        ...userIdAttribute,\n        required: userIdAttribute.required ?? true,\n      },\n      userIdAttribute.errorMessage || 'User ID attribute is required',\n    ),\n    scimEndpointUrl: createFieldSchema(\n      COMMON_FIELD_CONFIGS.url,\n      {\n        ...scimEndpointUrl,\n        required: scimEndpointUrl.required ?? false,\n      },\n      scimEndpointUrl.errorMessage || 'Must be a valid URL',\n    ).optional(),\n  });\n};\n\n/**\n * Creates a complete schema for SSO provisioning form validation\n */\nexport const createSsoProvisioningSchema = (options: SsoProvisioningSchema = {}) => {\n  return createProvisioningDetailsSchema(options);\n};\n\n// Default schema instances\nexport const provisioningDetailsSchema = createProvisioningDetailsSchema();\nexport const ssoProvisioningSchema = createSsoProvisioningSchema();\n\n// Type exports\nexport type ProvisioningDetailsFormValues = z.infer<typeof provisioningDetailsSchema>;\nexport type SsoProvisioningFormValues = z.infer<typeof ssoProvisioningSchema>;\n","import { createDomainSchema } from '@core/schemas/common';\nimport { z } from 'zod';\n\nimport { type DomainCreateSchemas } from './domain-create-schema-types';\n\n/**\n * Helper to merge schema field config with defaults\n */\nconst mergeFieldConfig = <T extends keyof DomainCreateSchemas>(\n  schema: DomainCreateSchemas | undefined,\n  field: T,\n  defaultError: string,\n) => {\n  const fieldConfig = schema?.[field];\n  return fieldConfig\n    ? {\n        ...fieldConfig,\n        errorMessage: fieldConfig.errorMessage || defaultError,\n      }\n    : {\n        errorMessage: defaultError,\n      };\n};\n\n/**\n * Creates a schema for domain create form validation\n * @param options - Schema configuration options\n * @param defaultErrorMessage - Default error message for validation failures\n */\nexport const createDomainCreateSchema = (\n  options: DomainCreateSchemas = {},\n  defaultErrorMessage = 'Please enter a valid domain (e.g., example.com or https://example.com)',\n) => {\n  const domainConfig = mergeFieldConfig(options, 'domainUrl', defaultErrorMessage);\n\n  return z.object({\n    domain_url: createDomainSchema({\n      required: true,\n      ...domainConfig,\n    }),\n  });\n};\n\n/**\n * Default schema for domain create form validation\n */\nexport const domainCreateSchema = createDomainCreateSchema();\n\n/**\n * Type for domain create form data\n */\nexport type InternalDomainCreateFormValues = z.infer<typeof domainCreateSchema>;\n","import type { StylingVariables, MergedStyles } from './theme-types';\n\n/**\n * Returns the merged CSS variables for the current theme.\n *\n * @param styling - An object containing variables for common, light, and dark themes.\n * @param isDarkMode - A boolean indicating if dark mode is active.\n * @returns An object with a variables property containing the merged CSS variables.\n */\nexport const getCoreStyles = (\n  styling: StylingVariables = { common: {}, light: {}, dark: {} },\n  isDarkMode = false,\n): MergedStyles => {\n  return {\n    variables: {\n      ...(styling?.common || {}),\n      ...(isDarkMode ? styling?.dark || {} : styling?.light || {}),\n    },\n  };\n};\n\n/**\n * Returns component styles supporting both flat and nested variable formats.\n *\n * @param styling - Object containing either direct styling variables or nested under 'variables'\n * @param isDarkMode - Boolean indicating if dark mode is active\n * @returns Merged styles with variables and classNames\n */\nexport const getComponentStyles = (\n  styling: { variables?: StylingVariables; classes?: Record<string, string | undefined> } = {},\n  isDarkMode = false,\n): MergedStyles => {\n  const stylingVars = styling.variables;\n  const coreStyles = getCoreStyles(stylingVars, isDarkMode);\n\n  return {\n    variables: coreStyles.variables,\n    classes: styling.classes,\n  };\n};\n\n/**\n * Apply theme styling to document and set CSS variables\n *\n * @param styling - Theme variables to apply\n * @param mode - Theme mode (dark/light)\n * @param theme - UI theme variant\n */\nexport function applyStyleOverrides(\n  styling: StylingVariables,\n  mode: 'dark' | 'light' = 'light',\n  theme: 'default' | 'minimal' | 'rounded' = 'default',\n): void {\n  const isDarkMode = mode === 'dark';\n  const html = document.documentElement;\n  html.dataset.theme = theme;\n\n  // Handle dark mode using class\n  if (isDarkMode) {\n    html.classList.add('dark');\n  } else {\n    html.classList.remove('dark');\n  }\n\n  // Apply CSS variable overrides (if any)\n  const { variables } = getCoreStyles(styling, isDarkMode);\n\n  // Apply only string values directly\n  for (const [key, value] of Object.entries(variables)) {\n    if (typeof value === 'string') {\n      html.style.setProperty(key, value as string);\n    }\n  }\n}\n","import AppleLogo from './apple-logo.svg';\nimport EntraIdLogo from './entraid-logo.svg';\nimport GoogleLogo from './google-logo.svg';\nimport MicrosoftLogo from './microsoft-logo.svg';\nimport OidcLogo from './oidc-logo.svg';\nimport OktaLogo from './okta-logo.svg';\nimport PingIdLogo from './pingid-logo.svg';\nimport SamlpLogo from './samlp-logo.svg';\n\nexport const AppleLogoSvg = AppleLogo;\nexport const GoogleLogoSvg = GoogleLogo;\nexport const MicrosoftLogoSvg = MicrosoftLogo;\nexport const OidcLogoSvg = OidcLogo;\nexport const OktaLogoSvg = OktaLogo;\nexport const PingIdLogoSvg = PingIdLogo;\nexport const SamlpLogoSvg = SamlpLogo;\nexport const EntraIdLogoSvg = EntraIdLogo;\n"],"mappings":"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","names":["I18nUtils","obj","path","current","keys","key","template","vars","_","components","result","lastIndex","match","fullMatch","componentKey","content","matchStart","component","namespace","translations","overrides","baseTranslator","enhancedTranslator","options","fallback","text","prefix","hasOverrides","fullKey","overrideValue","translationValue","language","cache","mod","globImport_translations_json","data","currentLanguage","fallbackLanguage","createI18nService","_currentLanguage","_fallbackLanguage","_translations","newFallbackLanguage","error","isApiError","error","hasApiErrorBody","normalizeError","options","code","resolved","getStatusCode","s","BusinessError","_BusinessError","data","isBusinessError","error","MyAccountClient","initializeMyAccountClient","auth","tokenManagerService","latestScopes","setLatestScopes","scopes","myAccountBaseUrl","fetcher","url","init","token","MyOrgClient","initializeMyOrgClient","auth","tokenManagerService","latestScopes","setLatestScopes","scopes","myOrgProxyBaseUrl","fetcher","url","init","token","AuthUtils","domain","domainWithSlash","pendingTokenRequests","FALLBACK_ERRORS","TokenUtils","domain","audiencePath","domainURL","AuthUtils","scope","audience","auth","contextInterface","ignoreCache","error","prompt","token","createTokenManager","requestKey","existingRequest","tokenPromise","isProxyMode","auth","createCoreClient","authDetails","i18nOptions","i18nService","createI18nService","auth","tokenManagerService","createTokenManager","myOrgApiClient","setOrgScopes","initializeMyOrgClient","myAccountApiClient","setAccountScopes","initializeMyAccountClient","scope","audiencePath","ignoreCache","isProxyMode","requiredScopes","z","createEmailContactSchema","errorMessage","customRegex","EmailContactSchema","z","phoneRegex","createSmsContactSchema","errorMessage","customRegex","SmsContactSchema","z","createStringSchema","options","required","regex","minLength","maxLength","errorMessage","schema","requiredLength","val","createLogoSchema","message","urlValidator","isValidUrl","isHttpProtocol","DOMAIN_REGEX","createDomainSchema","createBooleanSchema","COMMON_FIELD_CONFIGS","createFieldSchema","fieldConfig","customError","z","createOrganizationDetailSchema","options","name","displayName","color","logoURL","colorRegex","colorErrorMessage","createStringSchema","createLogoSchema","organizationDetailSchema","FACTOR_TYPE_EMAIL","FACTOR_TYPE_PHONE","FACTOR_TYPE_PUSH_NOTIFICATION","FACTOR_TYPE_TOTP","FACTOR_TYPE_RECOVERY_CODE","FACTOR_TYPE_WEBAUTHN_ROAMING","FACTOR_TYPE_WEBAUTHN_PLATFORM","SUPPORTED_FACTOR_TYPES","buildEnrollParams","factorType","options","FACTOR_TYPE_EMAIL","FACTOR_TYPE_PHONE","FACTOR_TYPE_TOTP","FACTOR_TYPE_WEBAUTHN_ROAMING","FACTOR_TYPE_WEBAUTHN_PLATFORM","FACTOR_TYPE_RECOVERY_CODE","FACTOR_TYPE_PUSH_NOTIFICATION","getFactorDisplayName","type","enrolledFactor","createAuthenticator","id","enrolled","created_at","transformMyAccountFactors","availableFactorsResponse","enrolledFactors","onlyActive","result","confirmedFactors","factor","mfaType","enrolledByType","availableFactor","MFAMappers","availableFactorsResponse","enrolledFactorsResponse","onlyActive","transformMyAccountFactors","factorType","options","buildEnrollParams","authSession","baseParams","USER_MFA_SCOPES","DEFAULT_COLORS","OrgDetailsFactory","DEFAULT_COLORS","OrgDetailsMappers","orgData","DEFAULT_COLORS","formValues","updateLogo","payload","STRATEGIES","AVAILABLE_STRATEGY_LIST","STRATEGY_DISPLAY_NAMES","STRATEGY_FIELD_MAPPINGS","STRATEGIES","getValidOptionsForStrategy","strategy","formOptions","isValidValue","value","validFields","key","SsoProviderMappers","data","name","display_name","options","is_enabled","show_as_button","assign_membership_on_login","configOptions","updateRequest","validOptions","MY_ORG_DETAILS_EDIT_SCOPES","MY_ORG_SSO_PROVIDER_TABLE_SCOPES","MY_ORG_SSO_PROVIDER_CREATE_SCOPES","MY_ORG_SSO_PROVIDER_EDIT_SCOPES","MY_ORG_DOMAIN_SCOPES","z","STRATEGY_BUILDERS","options","createFieldSchema","COMMON_FIELD_CONFIGS","data","ctx","createBooleanSchema","createProviderSelectionSchema","strategy","AVAILABLE_STRATEGY_LIST","createProviderDetailsSchema","name","displayName","createProviderConfigureSchema","strategyOptions","builder","createSsoProviderSchema","selectionSchema","detailsSchema","providerSelectionSchema","providerDetailsSchema","ssoProviderSchema","z","createDeleteProviderSchema","expectedProviderName","options","providerName","value","deleteProviderSchema","z","createProvisioningDetailsSchema","options","userIdAttribute","scimEndpointUrl","createFieldSchema","COMMON_FIELD_CONFIGS","createSsoProvisioningSchema","provisioningDetailsSchema","ssoProvisioningSchema","z","mergeFieldConfig","schema","field","defaultError","fieldConfig","createDomainCreateSchema","options","defaultErrorMessage","domainConfig","createDomainSchema","domainCreateSchema","getCoreStyles","styling","isDarkMode","getComponentStyles","stylingVars","applyStyleOverrides","mode","theme","html","variables","key","value","AppleLogoSvg","apple_logo_default","GoogleLogoSvg","google_logo_default","MicrosoftLogoSvg","microsoft_logo_default","OidcLogoSvg","oidc_logo_default","OktaLogoSvg","okta_logo_default","PingIdLogoSvg","pingid_logo_default","SamlpLogoSvg","samlp_logo_default","EntraIdLogoSvg","entraid_logo_default"]}