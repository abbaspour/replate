@startuml
' Replate Business API — Roles and Permissions
' Generated from tf/04-business-website.tf on 2025-10-30 16:51 local time

skinparam linetype ortho
skinparam class {
  BackgroundColor White
  BorderColor #555555
}
left to right direction
hide methods
hide stereotypes

title Organization Roles ↔ Business API  Permissions

package "Permissions (business.api scopes)" as PERMS {
  class "read:organization" as P_READ_ORG <<scope>>
  class "update:organization" as P_UPDATE_ORG <<scope>>
  class "read:pickups" as P_READ_PICKUPS <<scope>>
  class "create:pickups" as P_CREATE_PICKUPS <<scope>>
  class "update:pickups" as P_UPDATE_PICKUPS <<scope>>
  class "read:schedules" as P_READ_SCHEDULES <<scope>>
  class "update:schedules" as P_UPDATE_SCHEDULES <<scope>>
}

package "Supplier" {
  class "Supplier Admin" as R_SUPPLIER_ADMIN <<role>>
  class "Supplier Member" as R_SUPPLIER_MEMBER <<role>>
}

package "Community" {
  class "Community Admin" as R_COMMUNITY_ADMIN <<role>>
  class "Community Member" as R_COMMUNITY_MEMBER <<role>>
}

package "Logistics" {
  class "Logistics Admin" as R_LOGISTICS_ADMIN <<role>>
  class "Logistics Driver" as R_LOGISTICS_DRIVER <<role>>
}


' Inheritance: Admin roles extend Member roles and inherit their permissions
R_SUPPLIER_ADMIN --|> R_SUPPLIER_MEMBER
R_COMMUNITY_ADMIN --|> R_COMMUNITY_MEMBER

' Supplier Admin (inherits Supplier Member)
R_SUPPLIER_ADMIN --> P_UPDATE_ORG

' Supplier Member
R_SUPPLIER_MEMBER --> P_READ_ORG
R_SUPPLIER_MEMBER --> P_READ_PICKUPS
R_SUPPLIER_MEMBER --> P_CREATE_PICKUPS
R_SUPPLIER_MEMBER --> P_READ_SCHEDULES
R_SUPPLIER_MEMBER --> P_UPDATE_SCHEDULES

' Logistics Admin
R_LOGISTICS_ADMIN --> P_READ_ORG
R_LOGISTICS_ADMIN --> P_UPDATE_ORG
R_LOGISTICS_ADMIN --> P_READ_PICKUPS

' Logistics Driver
R_LOGISTICS_DRIVER --> P_READ_PICKUPS
R_LOGISTICS_DRIVER --> P_UPDATE_PICKUPS

' Community Admin (inherits Community Member)
R_COMMUNITY_ADMIN --> P_UPDATE_ORG

' Community Member
R_COMMUNITY_MEMBER --> P_READ_ORG
R_COMMUNITY_MEMBER --> P_READ_SCHEDULES
R_COMMUNITY_MEMBER --> P_UPDATE_SCHEDULES

@enduml
